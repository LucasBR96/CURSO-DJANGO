{% extends 'base.html' %}

{% load static %}

{% block titulo %}
   Lista de Fornecedores
{% endblock %}

{% block corpo %}

   <div class = "mt-2 mb-3">
      <h5 class="mb-3">Nossos Fornecedores</h5>
      <p class = "text-left" style = "font-size: 16px" >
         A nossa empresa sempre se comprometeu com qualidade e transparência. Para que o melhor produto chegue a 
         sua mesa, nós escolhemos sempre os produtores que priorizam o bom preço, o tratamento digno de seus fun-
         cionários e o meio ambiente. Como um sinal de boa fé, listamos aqui nossos fornecedores.
      </p>
   </div> 

   <table style='width:100%'
          class='table table-striped table-sm table-responsive mb-4'>
      <thead style='width:100%' >
         <tr class = 'text-center'>
            <th scope="col" style = "display: none;">#</th>
            <th scope="col" style = "width: 25%;">Nome</th>
            <th scope="col" style = "width: 25%;">Endereco</th>
            <th scope="col" style = "width: 25%;">Telefone</th>
            <th scope="col" style = "width: 25%;">CNPJ</th>
         </tr>
      </thead>
      <tbody>
         {% for fornec in forn %}
            <tr class = "text-center">
               <th scope="col" style = "display: none;">{{ fornec.id }}</th>
               <td>
                  <a href = "../visualisar_fornecedor/{{ fornec.id }}" id = "{{fornec.Nome}}" >{{fornec.Nome}}</a>
               </td>
               <td>
                  {{fornec.Endereco}}
               </td>
               <td>
                  {{fornec.Telefone}}
               </td>
               <td>
                  {{fornec.CNPJ}}
               </td>
            </tr>
         {% endfor %}
      </tbody>
   </table>

   <div style='font-size: 14px; margin-bottom: 28px'>
      {% if forn.has_other_pages %}
         <ul class='pagination'>

            {% if forn.has_previous %}
               <li class='page-item'><a class='page-link' href='?pagina={{ forn.previous_page_number }}'>Anterior</a></li>
            {% else %}
               <li class='page-item disabled'><a class='page-link' href='#' tabindex='-1'>Anterior</a></li>
            {% endif %}

            {% for i in forn.paginator.page_range %}
               {% if forn.number == i %}
                  <li class='page-item active'><a class='page-link' href='#'>{{ i }} </a></li>
               {% else %}
                  <li class='page-item'><a class='page-link' href='?pagina={{ i }}'>{{ i }}</a></li>
               {% endif %}
            {% endfor %}

            {% if forn.has_next %}
               <li class='page-item'><a class='page-link' href='?pagina={{ forn.next_page_number }}'>Próxima</a></li>
            {% else %}
               <li class='page-item disabled'><a class='page-link' href='#' tabindex='-1'>Próxima</a></li>
            {% endif %}

         </ul>
      {% endif %}
   </div>
{% endblock %}

{% block domready %}

   <script>

      // $( document ).ready( function(){

      //    $( "td.alter-col" ).each( function(){

      //       let top = $( this ).parent();
      //       let id  = $( top ).find( "th" ).text();
      //       console.log( id );

      //       $( this ).find( "form" ).each( function(){

      //          $( this ).append( `
      //             <input name = "forn_id" value = "${ id }">
      //          `);

      //          $( this ).addClass( "d-none" );
      //       });

      //       $( this ).append( `
      //          <button class = " btn btn-del btn-outline-danger">
      //             remover
      //          </button>
      //       ` );
      //       let m = $( this ).find( ".btn-del" )
      //       let n = $( this ).find( ".remove-forn" )
      //       $( m ).insertAfter( n );

      //       $( this ).append( `
      //          <button class = " btn btn-alter btn-outline-secondary">
      //             alterar
      //          </button>
      //       ` );
      //       m = $( this ).find( ".btn-alter" )
      //       n = $( this ).find( ".alterar-forn" )
      //       $( m ).insertAfter( n );
      //    })

      //    $( ".btn-del" ).click( function(){
            
      //       let form = $( this ).prev();
      //       url = $( form ).attr( "action" );
      //       console.log( url );

      //       data = $( form ).serializeArray();
      //       console.log( data );

      //       $.post( url , data , function(){
      //       })
      //    })

      // })
   </script>
{% endblock %}